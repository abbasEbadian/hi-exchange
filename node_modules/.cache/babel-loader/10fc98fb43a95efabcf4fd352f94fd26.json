{"ast":null,"code":"var _jsxFileName = \"H:\\\\Projects\\\\package\\\\cheerio\\\\src\\\\jsx\\\\index.jsx\";\nimport React, { Component, useContext, useEffect, useState } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport Dashboard from './pages/index';\nimport BuySell from './pages/buy-sell';\nimport Accounts from './pages/accounts';\nimport Settings from './pages/settings';\nimport Preferences from './pages/settings-preferences';\nimport SettingsSecurity from './pages/settings-security';\nimport SettingsAccount from './pages/settings-account';\nimport AddBankAccount from './pages/add-bank-acc';\nimport AddDebitCard from './pages/add-debit-card';\nimport Locked from './pages/lock';\nimport Otp1 from './pages/otp-1';\nimport Otp2 from './pages/otp-2';\nimport PrivacyPolicy from './pages/privacy-policy';\nimport Reset from './pages/reset';\nimport Signin from './pages/signin';\nimport Signup from './pages/signup';\nimport TermsCondition from './pages/terms-condition';\nimport VerifyStep1 from './pages/verify-step-1';\nimport VerifyStep2 from './pages/verify-step-2';\nimport VerifyStep3 from './pages/verify-step-3';\nimport VerifyStep4 from './pages/verify-step-4';\nimport VerifyStep5 from './pages/verify-step-5';\nimport VerifyStep6 from './pages/verify-step-6';\nimport History from './pages/history';\nimport Demo from './pages/demo';\nimport Landing from './pages/landing';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetch_currencies, userUpdateDetail, get_wallet_list } from '../redux/actions';\nimport AuthRoute from './routes/AuthRoute';\nimport BasicRoute from './routes/BasicRoute';\nimport axios from 'axios';\nimport { sessionService } from 'redux-react-session';\nimport createAuthRefreshInterceptor from 'axios-auth-refresh';\nimport { type } from 'os'; // Function that will be called to refresh authorization\n\nconst refreshAuthLogic = failedRequest => {\n  sessionService.loadSession().then(session => {\n    sessionService.loadSession().then(session => {\n      axios.post(\"https://hi-exchange.com/api/v2/token/refresh/\", {\n        refresh: session.refresh\n      }).then(data => {\n        sessionService.saveSession({\n          token: data.data.access,\n          refresh: session.refresh,\n          refresh_time: new Date().getTime()\n        }).then(e => {\n          return Promise.resolve();\n        }).catch(e => {\n          console.log(e);\n        });\n      }).catch(e => {\n        console.log(e);\n      });\n    }).catch(err => {\n      return Promise.reject();\n    });\n  }).catch(err => {\n    return Promise.reject();\n  });\n}; // bind axios to auth refresher\n\n\ncreateAuthRefreshInterceptor(axios, refreshAuthLogic); // Set token to axios requestss\n\naxios.interceptors.request.use(request => {\n  return new Promise((resolve, reject) => {\n    sessionService.loadSession().then(session => {\n      if (!session.token) resolve(request);\n      request.headers.Authorization = \"Bearer \" + session.token;\n      resolve(request);\n    }).catch(err => {\n      if (String(err).indexOf(\"Session\") > -1) resolve(request);else reject(request);\n    });\n  });\n});\n\nconst Index = () => {\n  const dispatch = useDispatch();\n  const checked = useSelector(state => state.session.checked);\n  const authenticated = useSelector(state => state.session.authenticated);\n  useEffect(() => {\n    dispatch(fetch_currencies());\n    dispatch(get_wallet_list());\n    let inter = undefined;\n\n    if (authenticated && true) {\n      const currentTime = new Date(); //current unix timestamp\n\n      const currentTimeUnix = currentTime.getTime();\n      const execTime = new Date();\n      execTime.setMinutes(currentTime.getMinutes() + 1);\n      execTime.setSeconds(2);\n      let timeLeft = execTime - currentTimeUnix;\n      setTimeout(function () {\n        inter = setInterval(function () {\n          dispatch(fetch_currencies());\n        }, 60000); //repeat every 24h\n      }, timeLeft); //wait until 20:00 as calculated above\n    } // return () => {\n    //     if (inter)\n    //     clearInterval(inter)\n    // } \n\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, checked ? /*#__PURE__*/React.createElement(BrowserRouter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"main-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/buy-sell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(BuySell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 61\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/accounts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Accounts, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 61\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Settings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 61\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/settings-preferences\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Preferences, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 73\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/settings-security\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(SettingsSecurity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 70\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/settings-account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(SettingsAccount, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 69\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/add-bank-acc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(AddBankAccount, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 65\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/add-debit-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(AddDebitCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 67\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Locked, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 57\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/privacy-policy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(PrivacyPolicy, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 67\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/reset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Reset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 58\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/terms-condition\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(TermsCondition, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 68\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/verify-step-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(VerifyStep1, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 66\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/verify-step-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(VerifyStep2, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 66\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/verify-step-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(VerifyStep3, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 66\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/verify-step-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(VerifyStep4, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 66\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/verify-step-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(VerifyStep5, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 66\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/verify-step-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(VerifyStep6, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 66\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/history\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(History, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 60\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/landing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Landing, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 60\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/demo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Demo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 57\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Dashboard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 52\n    }\n  })), /*#__PURE__*/React.createElement(BasicRoute, {\n    exact: true,\n    path: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/otp-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 59\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(BasicRoute, {\n    exact: true,\n    path: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Signup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 59\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(BasicRoute, {\n    exact: true,\n    path: \"/otp-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Otp1, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 58\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(BasicRoute, {\n    exact: true,\n    path: \"/otp-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Otp2, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 58\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(Route, {\n    render: () => /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }, \"404\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  })))) : /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }));\n}; // const mapStateToProps = ({session}) =>({\n//     checked : session.checked\n// })\n\n\nexport default Index;","map":{"version":3,"sources":["H:/Projects/package/cheerio/src/jsx/index.jsx"],"names":["React","Component","useContext","useEffect","useState","BrowserRouter","Route","Switch","Redirect","Dashboard","BuySell","Accounts","Settings","Preferences","SettingsSecurity","SettingsAccount","AddBankAccount","AddDebitCard","Locked","Otp1","Otp2","PrivacyPolicy","Reset","Signin","Signup","TermsCondition","VerifyStep1","VerifyStep2","VerifyStep3","VerifyStep4","VerifyStep5","VerifyStep6","History","Demo","Landing","useDispatch","useSelector","fetch_currencies","userUpdateDetail","get_wallet_list","AuthRoute","BasicRoute","axios","sessionService","createAuthRefreshInterceptor","type","refreshAuthLogic","failedRequest","loadSession","then","session","post","refresh","data","saveSession","token","access","refresh_time","Date","getTime","e","Promise","resolve","catch","console","log","err","reject","interceptors","request","use","headers","Authorization","String","indexOf","Index","dispatch","checked","state","authenticated","inter","undefined","currentTime","currentTimeUnix","execTime","setMinutes","getMinutes","setSeconds","timeLeft","setTimeout","setInterval"],"mappings":"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","sourcesContent":["import React, { Component, useContext, useEffect, useState } from 'react';\r\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\r\nimport Dashboard from './pages/index';\r\nimport BuySell from './pages/buy-sell';\r\nimport Accounts from './pages/accounts';\r\nimport Settings from './pages/settings';\r\nimport Preferences from './pages/settings-preferences';\r\nimport SettingsSecurity from './pages/settings-security';\r\nimport SettingsAccount from './pages/settings-account';\r\nimport AddBankAccount from './pages/add-bank-acc';\r\nimport AddDebitCard from './pages/add-debit-card';\r\nimport Locked from './pages/lock';\r\nimport Otp1 from './pages/otp-1';\r\nimport Otp2 from './pages/otp-2';\r\nimport PrivacyPolicy from './pages/privacy-policy';\r\nimport Reset from './pages/reset';\r\nimport Signin from './pages/signin';\r\nimport Signup from './pages/signup';\r\nimport TermsCondition from './pages/terms-condition';\r\nimport VerifyStep1 from './pages/verify-step-1';\r\nimport VerifyStep2 from './pages/verify-step-2';\r\nimport VerifyStep3 from './pages/verify-step-3';\r\nimport VerifyStep4 from './pages/verify-step-4';\r\nimport VerifyStep5 from './pages/verify-step-5';\r\nimport VerifyStep6 from './pages/verify-step-6';\r\nimport History from './pages/history';\r\nimport Demo from './pages/demo';\r\nimport Landing from './pages/landing';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { fetch_currencies, userUpdateDetail, get_wallet_list } from '../redux/actions'\r\nimport AuthRoute from './routes/AuthRoute'\r\nimport BasicRoute from './routes/BasicRoute'\r\nimport axios from 'axios'\r\nimport { sessionService } from 'redux-react-session' \r\nimport createAuthRefreshInterceptor from 'axios-auth-refresh';\r\nimport { type } from 'os';\r\n\r\n\r\n\r\n// Function that will be called to refresh authorization\r\nconst refreshAuthLogic = failedRequest =>{\r\n    sessionService.loadSession().then( session=>{\r\n        sessionService.loadSession().then(session=>{\r\n           axios.post(\"https://hi-exchange.com/api/v2/token/refresh/\", {\r\n               refresh: session.refresh\r\n           }).then(data=>{\r\n              \r\n               sessionService.saveSession({\r\n                   token: data.data.access,\r\n                   refresh: session.refresh,\r\n                   refresh_time: new Date().getTime()\r\n               }).then(e=>{\r\n                   \r\n                   return Promise.resolve()\r\n               }).catch(e=>{\r\n                console.log(e);\r\n               })\r\n           }).catch(e=>{\r\n               console.log(e);\r\n           })\r\n       }).catch(err=>{\r\n           return Promise.reject()\r\n       })\r\n   }).catch(err=>{\r\n    return Promise.reject()})\r\n} \r\n// bind axios to auth refresher\r\ncreateAuthRefreshInterceptor(axios, refreshAuthLogic)\r\n\r\n// Set token to axios requestss\r\naxios.interceptors.request.use(request=>{\r\n    return new Promise((resolve, reject)=>{\r\n        sessionService.loadSession().then(session=>{\r\n            if (!session.token) resolve(request)\r\n            request.headers.Authorization = \"Bearer \" + session.token\r\n            resolve(request)\r\n        }).catch(err=>{\r\n            if(String(err).indexOf(\"Session\") > -1)\r\n            resolve(request)\r\n            else\r\n            reject(request)\r\n        })\r\n    })\r\n})\r\n\r\n\r\n\r\nconst Index = ()=> {\r\n    const dispatch = useDispatch();\r\n    const checked = useSelector(state => state.session.checked);\r\n    const authenticated = useSelector(state => state.session.authenticated);\r\n\r\n    useEffect( ()=>{\r\n        dispatch(fetch_currencies());\r\n        dispatch(get_wallet_list());\r\n        let inter = undefined\r\n        if(authenticated && true){\r\n            const currentTime = new Date()  //current unix timestamp\r\n            const currentTimeUnix = currentTime.getTime();\r\n            const execTime = new Date()\r\n            execTime.setMinutes(currentTime.getMinutes()+1)\r\n            execTime.setSeconds(2)\r\n            \r\n            let timeLeft = execTime - currentTimeUnix;\r\n            \r\n            setTimeout(function() {\r\n                inter = setInterval(function() {\r\n                    dispatch(fetch_currencies());\r\n                }, 60000);  //repeat every 24h\r\n            }, timeLeft);  //wait until 20:00 as calculated above\r\n        }\r\n        // return () => {\r\n        //     if (inter)\r\n        //     clearInterval(inter)\r\n        // } \r\n    }, []);\r\n\r\n    return (\r\n        <>  \r\n        \r\n            {checked?\r\n            \r\n            <BrowserRouter  >\r\n                <div id=\"main-wrapper\">\r\n                    <Switch>\r\n                        <AuthRoute  exact path='/buy-sell'> <BuySell/> </AuthRoute>\r\n                        <AuthRoute  exact path='/accounts'> <Accounts/> </AuthRoute>\r\n                        <AuthRoute  exact path='/settings'> <Settings/> </AuthRoute>\r\n                        <AuthRoute  exact path='/settings-preferences'> <Preferences/> </AuthRoute>\r\n                        <AuthRoute  exact path='/settings-security'> <SettingsSecurity/> </AuthRoute>\r\n                        <AuthRoute  exact path='/settings-account'> <SettingsAccount/> </AuthRoute>\r\n                        <AuthRoute  exact path='/add-bank-acc'> <AddBankAccount/> </AuthRoute>\r\n                        <AuthRoute  exact path='/add-debit-card'> <AddDebitCard/> </AuthRoute>\r\n                        <AuthRoute  exact path='/lock'> <Locked/> </AuthRoute>\r\n                        <AuthRoute  exact path='/privacy-policy'> <PrivacyPolicy/> </AuthRoute>\r\n                        <AuthRoute  exact path='/reset'> <Reset/> </AuthRoute>\r\n                        <AuthRoute  exact path='/terms-condition'> <TermsCondition/> </AuthRoute>\r\n                        <AuthRoute  exact path='/verify-step-1'> <VerifyStep1/> </AuthRoute>\r\n                        <AuthRoute  exact path='/verify-step-2'> <VerifyStep2/> </AuthRoute>\r\n                        <AuthRoute  exact path='/verify-step-3'> <VerifyStep3/> </AuthRoute>\r\n                        <AuthRoute  exact path='/verify-step-4'> <VerifyStep4/> </AuthRoute>\r\n                        <AuthRoute  exact path='/verify-step-5'> <VerifyStep5/> </AuthRoute>\r\n                        <AuthRoute  exact path='/verify-step-6'> <VerifyStep6/> </AuthRoute>\r\n                        <AuthRoute  exact path='/history'> <History/> </AuthRoute>\r\n                        <AuthRoute  exact path='/landing'> <Landing/> </AuthRoute>\r\n                        <AuthRoute  exact path='/demo'> <Demo/> </AuthRoute>\r\n                        <AuthRoute  exact path='/'><Dashboard></Dashboard></AuthRoute>\r\n                        <BasicRoute exact path='/signin'> <Redirect to=\"/otp-1\"></Redirect> </BasicRoute>\r\n                        <BasicRoute exact path='/signup'> <Signup/> </BasicRoute>\r\n                        <BasicRoute exact path='/otp-1'> <Otp1/> </BasicRoute>\r\n                        <BasicRoute exact path='/otp-2'> <Otp2/> </BasicRoute>\r\n                        <Route render={()=>\r\n                            <h1>404</h1>\r\n                        \r\n                        }></Route>\r\n                    </Switch>\r\n                </div>\r\n            </BrowserRouter>\r\n           :\r\n            <section></section> \r\n           }\r\n        </>\r\n    );\r\n    \r\n}\r\n// const mapStateToProps = ({session}) =>({\r\n//     checked : session.checked\r\n// })\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}