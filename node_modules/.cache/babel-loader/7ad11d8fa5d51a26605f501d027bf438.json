{"ast":null,"code":"import { FETCH_USER_DETAIL, UPDATE_USER_DETAIL, UPDATE_USER_PROFILE, CHECK_USER_SESSION, REFRESH_USER_TOKEN, UPDATE_AUTH_ID, UPDATE_LOG_STATUS, UPDATE_LOG_INFO, UPDATE_USER_WALLET } from '../actionTypes';\nimport axios from 'axios';\nexport const udpate_user_detail = user => {\n  return {\n    type: UPDATE_USER_DETAIL,\n    payload: user\n  };\n};\nexport const udpate_user_profile = profile => {\n  return {\n    type: UPDATE_USER_PROFILE,\n    payload: profile\n  };\n};\nexport const udpate_user_wallet = wallet => {\n  return {\n    type: UPDATE_USER_WALLET,\n    payload: wallet\n  };\n};\nexport const update_auth_id = authID => {\n  return {\n    type: UPDATE_AUTH_ID,\n    payload: authID\n  };\n};\nexport const update_log_status = status => {\n  return {\n    type: UPDATE_LOG_STATUS,\n    payload: status\n  };\n};\nexport const update_log_info = info => {\n  return {\n    type: UPDATE_LOG_INFO,\n    payload: info\n  };\n};\nexport const fetch_user_detail = token => {\n  return dispatch => {\n    axios.get(\"https://hi-exchange.com/api/v2/account/details/\", {\n      headers: {\n        \"Authorization\": \"Bearer \" + token\n      }\n    }).then(data => {\n      console.log(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const fetch_user_profile = token => {\n  return dispatch => {\n    axios.get(\"https://hi-exchange.com/api/v2/account/manage/\", {\n      headers: {\n        \"Authorization\": \"Bearer \" + token\n      }\n    }).then(data => {\n      console.log(data);\n    }).catch(error => {\n      console.log(error.response.status);\n    });\n  };\n};\nexport const check_user_session = () => {\n  return dispatch => {\n    const token = sessionStorage.getItem(\"hiexchange_token\");\n    console.log(token);\n\n    if (token) {\n      let refresh_time = sessionStorage.getItem(\"hiexchange_refresh_time\");\n      const refresh = sessionStorage.getItem(\"hiexchange_refresh\");\n      const time = refresh_time.split(\":\");\n      const refresh_hours = +time[0];\n      const refresh_minutes = +time[1];\n      const refresh_seconds = +time[2];\n      refresh_time = new Date();\n      refresh_time.setTime(refresh_hours, refresh_minutes, refresh_seconds);\n      const now = new Date();\n\n      if (refresh_time && now - refresh_time > 60 * 30 * 1000 && refresh) {\n        refresh_user_token(refresh).then(data => {\n          console.log(data);\n        });\n      } // dispatch(update_log_info({token, refresh}));\n      // dispatch(fetch_user_detail(token));\n      // dispatch(fetch_user_profile(token));\n\n    }\n  };\n};\nexport const refresh_user_token = refresh_token => {\n  return dispatch => {\n    axios.post(\"https://hi-exchange.com/api/v2/token/refresh/\", {\n      refresh: refresh_token\n    }).then(data => {\n      console.log(data);\n    }).catch(error => {\n      console.log(error.response);\n    });\n  };\n};","map":{"version":3,"sources":["H:/Projects/package/cheerio/src/redux/actions/user.js"],"names":["FETCH_USER_DETAIL","UPDATE_USER_DETAIL","UPDATE_USER_PROFILE","CHECK_USER_SESSION","REFRESH_USER_TOKEN","UPDATE_AUTH_ID","UPDATE_LOG_STATUS","UPDATE_LOG_INFO","UPDATE_USER_WALLET","axios","udpate_user_detail","user","type","payload","udpate_user_profile","profile","udpate_user_wallet","wallet","update_auth_id","authID","update_log_status","status","update_log_info","info","fetch_user_detail","token","dispatch","get","headers","then","data","console","log","catch","err","fetch_user_profile","error","response","check_user_session","sessionStorage","getItem","refresh_time","refresh","time","split","refresh_hours","refresh_minutes","refresh_seconds","Date","setTime","now","refresh_user_token","refresh_token","post"],"mappings":"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","sourcesContent":["import {\r\n    FETCH_USER_DETAIL,\r\n    UPDATE_USER_DETAIL,\r\n    UPDATE_USER_PROFILE,\r\n    CHECK_USER_SESSION,\r\n    REFRESH_USER_TOKEN,\r\n    UPDATE_AUTH_ID,\r\n    UPDATE_LOG_STATUS,\r\n    UPDATE_LOG_INFO,\r\n    UPDATE_USER_WALLET\r\n} from '../actionTypes'\r\nimport axios from 'axios';\r\n\r\nexport const udpate_user_detail = (user)=>{\r\n    return {\r\n        type: UPDATE_USER_DETAIL,\r\n        payload: user\r\n    }\r\n}\r\nexport const udpate_user_profile = (profile)=>{\r\n    return {\r\n        type: UPDATE_USER_PROFILE,\r\n        payload: profile\r\n    }\r\n}\r\n\r\nexport const udpate_user_wallet = (wallet)=>{\r\n    return {\r\n        type: UPDATE_USER_WALLET,\r\n        payload: wallet\r\n    }\r\n}\r\nexport const update_auth_id = (authID)=>{\r\n    return {\r\n        type: UPDATE_AUTH_ID,\r\n        payload: authID\r\n    }\r\n}\r\nexport const update_log_status = (status)=>{\r\n    return {\r\n        type: UPDATE_LOG_STATUS,\r\n        payload: status\r\n    }\r\n}\r\nexport const update_log_info = (info)=>{\r\n    return {\r\n        type: UPDATE_LOG_INFO,\r\n        payload: info\r\n    }\r\n}\r\n\r\nexport const fetch_user_detail = (token)=>{\r\n    return (dispatch) => {\r\n        axios.get(\"https://hi-exchange.com/api/v2/account/details/\", {\r\n            headers: {\r\n                \"Authorization\": \"Bearer \"+token,\r\n\r\n            }\r\n        }).then(data=>{\r\n            console.log(data);\r\n        }).catch(err=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n}\r\nexport const fetch_user_profile = (token)=>{\r\n    return (dispatch) => {\r\n        axios.get(\"https://hi-exchange.com/api/v2/account/manage/\", {\r\n            headers: {\r\n                \"Authorization\": \"Bearer \"+token\r\n            }\r\n        }).then(data=>{\r\n            console.log(data);\r\n        }).catch(error=>{\r\n            console.log(error.response.status);\r\n        })\r\n    }\r\n}\r\n\r\nexport const check_user_session = ()=>{\r\n    return (dispatch) => {\r\n        const token = sessionStorage.getItem(\"hiexchange_token\");\r\n        console.log(token);\r\n        \r\n        if(token){\r\n            let refresh_time = sessionStorage.getItem(\"hiexchange_refresh_time\");\r\n            const refresh = sessionStorage.getItem(\"hiexchange_refresh\");\r\n            const time = refresh_time.split(\":\")\r\n            const refresh_hours = +time[0]\r\n            const refresh_minutes = +time[1]\r\n            const refresh_seconds = +time[2]\r\n            refresh_time = new Date()\r\n            refresh_time.setTime(refresh_hours, refresh_minutes, refresh_seconds);\r\n            const now = new Date()\r\n            if (refresh_time && now - refresh_time > 60*30*1000 && refresh){\r\n                refresh_user_token(refresh).then(data=>{\r\n                    console.log(data);\r\n                })\r\n            }\r\n            // dispatch(update_log_info({token, refresh}));\r\n            // dispatch(fetch_user_detail(token));\r\n            // dispatch(fetch_user_profile(token));\r\n        }\r\n    }\r\n}\r\nexport const refresh_user_token = (refresh_token)=>{\r\n    return (dispatch) => {\r\n        axios.post(\"https://hi-exchange.com/api/v2/token/refresh/\", {\r\n            refresh: refresh_token\r\n        }).then(data=>{\r\n            console.log(data);\r\n        }).catch(error=>{\r\n            console.log(error.response);\r\n        })\r\n        \r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}