{"ast":null,"code":"var _jsxFileName = \"H:\\\\Projects\\\\package\\\\cheerio\\\\src\\\\jsx\\\\pages\\\\settings.jsx\";\nimport React, { useState } from 'react';\nimport PageTitle from '../element/page-title';\nimport SettingsNav from '../element/settings-nav';\nimport Header2 from '../layout/header2';\nimport Sidebar from '../layout/sidebar';\nimport PersonalInfo from '../element/personal-info.jsx';\nimport axios from 'axios';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { sessionService } from 'redux-react-session';\nimport { userUpdateImage } from '../../redux/actions';\nimport { ToastContainer, toast } from 'react-toastify';\n\nfunction Settings() {\n  const [name, setName] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const currentUser = useSelector(state => state.session.user);\n  const dispatch = useDispatch();\n  let token = \"\";\n  sessionService.loadSession().then(currentSession => token = currentSession.token).catch(err => console.log(err));\n  const toastOpt = {\n    position: \"bottom-left\",\n    hideProgressBar: false,\n    closeOnClick: true,\n    draggable: true,\n    autoClose: 5000\n  };\n\n  const changeImage = e => {\n    let reader = new FileReader();\n    reader.readAsDataURL(e.target.files[0]);\n\n    reader.onload = function () {\n      setImage(reader.result);\n    };\n\n    reader.onerror = function (error) {\n      console.log('Error: ', error);\n    };\n  };\n\n  const submitName = async e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (name) {\n      var bodyFormData = new FormData();\n      bodyFormData.append(\"first_name\", name);\n      bodyFormData.append(\"action\", \"profile\");\n      axios.post(\"https://hi-exchange.com/api/v2/account/manage/\", bodyFormData, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      }).then(res => {\n        const {\n          data\n        } = res;\n        if (data.error == 1) toast.error(data.message);else {\n          axios.get(\"https://hi-exchange.com/api/v2/account/details/\", {\n            headers: {\n              \"Authorization\": \"Bearer \" + token\n            }\n          }).then(data => {\n            sessionService.saveUser(data.data).then(e => {\n              console.log(\"updated\");\n            });\n          }).catch(err => {\n            console.log(err);\n          });\n        }\n      });\n    }\n\n    if (image) {\n      dispatch(userUpdateImage(image, toast, toastOpt));\n    }\n\n    return false;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header2, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(PageTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-3 col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SettingsNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-9 col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 45\n    }\n  }, \"\\u067E\\u0631\\u0648\\u0641\\u0627\\u06CC\\u0644 \\u06A9\\u0627\\u0631\\u0628\\u0631\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    action: \"#\",\n    onSubmit: submitName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3 col-xl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 58\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"rounded-circle ms-0 ms-sm-3\",\n    src: require('./../../images/profile/2.png'),\n    width: \"55\",\n    height: \"55\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 61\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 61\n    }\n  }, currentUser && /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 81\n    }\n  }, currentUser.first_name, \" \", \" \", \"  \", currentUser.last_name))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 61\n    }\n  }, \"\\u0646\\u0627\\u0645 \\u0648 \\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control f\",\n    placeholder: \"\\u0646\\u0627\\u0645\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 61\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-upload-wrapper\",\n    \"data-text\": \"\\u062A\\u063A\\u06CC\\u06CC\\u0631 \\u062A\\u0635\\u0648\\u06CC\\u0631\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"file-upload-field\",\n    type: \"file\",\n    onChange: changeImage,\n    className: \"file-upload-field position-relative\",\n    \"aria-describedby\": \"imagedHelpBlock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 61\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    id: \"imagedHelpBlock\",\n    className: \"form-text\",\n    style: {\n      fontSize: 0.7 + 'em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 61\n    }\n  }, \"\\u062D\\u062F\\u0627\\u06A9\\u062B\\u0631 \\u0633\\u0627\\u06CC\\u0632 \\u0645\\u062C\\u0627\\u0632 \\u0628\\u0631\\u0627\\u06CC \\u0641\\u0627\\u06CC\\u0644 20mb\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 text-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success waves-effect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 57\n    }\n  }, \"\\u0630\\u062E\\u06CC\\u0631\\u0647\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 45\n    }\n  }, \"\\u062D\\u0633\\u0627\\u0628 \\u06A9\\u0627\\u0631\\u0628\\u0631\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    action: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3 col-xl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 57\n    }\n  }, \"\\u0627\\u06CC\\u0645\\u06CC\\u0644 \\u062C\\u062F\\u06CC\\u062F\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    className: \"form-control\",\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 57\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3 col-xl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 57\n    }\n  }, \"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631 \\u062C\\u062F\\u06CC\\u062F\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control\",\n    placeholder: \"**********\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 57\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"mt-2 mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 57\n    }\n  }, \"\\u0641\\u0639\\u0627\\u0644\\u0633\\u0627\\u0632\\u06CC \\u0647\\u0648\\u06CC\\u062A \\u0633\\u0646\\u062C\\u06CC \\u062F\\u0648 \\u0645\\u0631\\u062D\\u0644\\u0647 \\u0627\\u06CC\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12  text-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success waves-effect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 57\n    }\n  }, \"\\u0630\\u062E\\u06CC\\u0631\\u0647\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(PersonalInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 37\n    }\n  }))))))));\n}\n\nexport default Settings;","map":{"version":3,"sources":["H:/Projects/package/cheerio/src/jsx/pages/settings.jsx"],"names":["React","useState","PageTitle","SettingsNav","Header2","Sidebar","PersonalInfo","axios","useSelector","useDispatch","sessionService","userUpdateImage","ToastContainer","toast","Settings","name","setName","image","setImage","currentUser","state","session","user","dispatch","token","loadSession","then","currentSession","catch","err","console","log","toastOpt","position","hideProgressBar","closeOnClick","draggable","autoClose","changeImage","e","reader","FileReader","readAsDataURL","target","files","onload","result","onerror","error","submitName","preventDefault","stopPropagation","bodyFormData","FormData","append","post","headers","Authorization","res","data","message","get","saveUser","require","first_name","last_name","value","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport PageTitle from '../element/page-title';\r\nimport SettingsNav from '../element/settings-nav';\r\nimport Header2 from '../layout/header2';\r\nimport Sidebar from '../layout/sidebar';\r\nimport PersonalInfo from '../element/personal-info.jsx'\r\nimport axios from 'axios';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { sessionService } from 'redux-react-session'\r\nimport { userUpdateImage } from '../../redux/actions'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\n\r\nfunction Settings() {\r\n    const [name, setName] = useState(\"\");\r\n    const [image, setImage ] = useState(\"\")\r\n    const currentUser = useSelector(state=>state.session.user)\r\n    const dispatch = useDispatch()\r\n    let token = \"\"\r\n    sessionService.loadSession()\r\n    .then(currentSession => token=currentSession.token)\r\n    .catch(err => console.log(err))\r\n    const toastOpt = {\r\n        position: \"bottom-left\",\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        draggable: true,\r\n        autoClose: 5000,\r\n    }\r\n    const changeImage =  e=>{\r\n    let reader = new FileReader();\r\n        reader.readAsDataURL(e.target.files[0]);\r\n        reader.onload = function () {\r\n            setImage(reader.result);\r\n        };\r\n        reader.onerror = function (error) {\r\n            console.log('Error: ', error);\r\n        };\r\n    }\r\n    const submitName =async  e=>{\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (name){\r\n            var bodyFormData = new FormData();\r\n            bodyFormData.append(\"first_name\", name);\r\n            bodyFormData.append(\"action\", \"profile\");\r\n            axios.post(\"https://hi-exchange.com/api/v2/account/manage/\", bodyFormData,\r\n                {headers: {Authorization: \"Bearer \"+ token }}\r\n            ).then(res=>{\r\n                const {data} = res;\r\n                if (data.error == 1)\r\n                toast.error(data.message)\r\n                else {\r\n                    axios.get(\"https://hi-exchange.com/api/v2/account/details/\", {\r\n                        headers: {\r\n                            \"Authorization\": \"Bearer \"+token,\r\n                        }\r\n                    }).then(data=>{\r\n                        sessionService.saveUser(data.data).then(e=>{\r\n                            console.log(\"updated\")\r\n                        })\r\n                    }).catch(err=>{\r\n                        console.log(err);\r\n                    })\r\n                }\r\n            })\r\n        \r\n        }\r\n        if (image){\r\n            dispatch(userUpdateImage(image, toast, toastOpt)); \r\n        }\r\n        return false;\r\n    }\r\n    return (\r\n        <>\r\n            <Header2 />\r\n            <Sidebar />\r\n            <PageTitle />\r\n\r\n            <div className=\"content-body\">\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-xl-3 col-md-4\">\r\n                            <SettingsNav/>                            \r\n                        </div>\r\n                        <div className=\"col-xl-9 col-md-8\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-xl-6\">\r\n                                    <div className=\"card\">\r\n                                        <div className=\"card-header\">\r\n                                            <h4 className=\"card-title\">پروفایل کاربر</h4>\r\n                                        </div>\r\n                                        <div className=\"card-body\">\r\n                                            <form action=\"#\" onSubmit={submitName}>\r\n                                                <div className=\"row\">\r\n                                                    \r\n                                                    <div className=\"mb-3 col-xl-12\">\r\n                                                         <div className=\"d-flex align-items-center mb-3\">\r\n                                                            <img className=\"rounded-circle ms-0 ms-sm-3\"\r\n                                                                src={require('./../../images/profile/2.png')} width=\"55\" height=\"55\" alt=\"\" />\r\n                                                            <div className=\"d-flex w-100\">\r\n                                                                {currentUser && <h4 className=\"mb-0\">{currentUser.first_name} {\" \"}  {currentUser.last_name}</h4>}\r\n                                                                \r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"mb-3 \">\r\n                                                            <label className=\"form-label\">نام و نام خانوادگی</label>\r\n                                                            <input type=\"text\" className=\"form-control f\" placeholder=\"نام\" value={name} onChange={e=>setName(e.target.value)} />\r\n                                                        </div>\r\n                                                       \r\n                                                        <div className=\"file-upload-wrapper\" data-text=\"تغییر تصویر\">\r\n                                                            <input name=\"file-upload-field\" type=\"file\" onChange={changeImage}\r\n                                                                className=\"file-upload-field position-relative\"  aria-describedby=\"imagedHelpBlock\"></input>\r\n                                                            <small id=\"imagedHelpBlock\" className=\"form-text\" style={{fontSize:0.7+'em'}}>حداکثر سایز مجاز برای فایل 20mb\r\n                                                            </small>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"col-12 text-start\">\r\n                                                        <button className=\"btn btn-success waves-effect\">ذخیره</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </form>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"col-xl-6\">\r\n                                    <div className=\"card\">\r\n                                        <div className=\"card-header\">\r\n                                            <h4 className=\"card-title\">حساب کاربر</h4>\r\n                                        </div>\r\n                                        <div className=\"card-body\">\r\n                                            <form action=\"#\">\r\n                                                <div className=\"row\">\r\n                                                    <div className=\"mb-3 col-xl-12\">\r\n                                                        <label className=\"form-label\">ایمیل جدید</label>\r\n                                                        <input type=\"email\" className=\"form-control\" placeholder=\"Email\" />\r\n                                                    </div>\r\n                                                    <div className=\"mb-3 col-xl-12\">\r\n                                                        <label className=\"form-label\">رمز عبور جدید</label>\r\n                                                        <input type=\"password\" className=\"form-control\"\r\n                                                            placeholder=\"**********\" />\r\n                                                        <small className=\"mt-2 mb-0\">فعالسازی هویت سنجی دو مرحله ای \r\n                                                        </small>\r\n                                                    </div>\r\n                                                    <div className=\"col-12  text-start\">\r\n                                                        <button className=\"btn btn-success waves-effect\">ذخیره</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </form>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"col-xl-12\">\r\n                                    <PersonalInfo></PersonalInfo>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                    \r\n            </div>\r\n                                                       \r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Settings;"]},"metadata":{},"sourceType":"module"}