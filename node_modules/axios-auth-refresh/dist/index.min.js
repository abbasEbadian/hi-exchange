!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("axios")):"function"==typeof define&&define.amd?define(["axios"],r):"object"==typeof exports?exports["axios-auth-refresh"]=r(require("axios")):e["axios-auth-refresh"]=r(e.axios)}(this,(function(e){return function(){"use strict";var r={593:function(e,r,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e},n.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.resendFailedRequest=r.getRetryInstance=r.unsetCache=r.createRequestQueueInterceptor=r.createRefreshCall=r.shouldInterceptError=r.mergeOptions=r.defaultOptions=void 0;var s=t(300);r.defaultOptions={statusCodes:[401],pauseInstanceWhileRefreshing:!1},r.mergeOptions=function(e,r){return n(n(n({},e),{pauseInstanceWhileRefreshing:r.skipWhileRefreshing}),r)},r.shouldInterceptError=function(e,r,t,n){var s,o;return!!e&&(!(null===(s=e.config)||void 0===s?void 0:s.skipAuthRefresh)&&(!!(r.interceptNetworkError&&!e.response&&0===e.request.status||e.response&&(null===(o=r.statusCodes)||void 0===o?void 0:o.includes(parseInt(e.response.status))))&&(e.response||(e.response={config:e.config}),!r.pauseInstanceWhileRefreshing||!n.skipInstances.includes(t))))},r.createRefreshCall=function(e,r,t){return  t.refreshCall || (t.refreshCall=r(e),"function"==typeof t.refreshCall.then)?t.refreshCall:(console.warn("axios-auth-refresh requires `refreshTokenCall` to return a promise."),Promise.reject())},r.createRequestQueueInterceptor=function(e,r,t){return void 0===r.requestQueueInterceptorId&&(r.requestQueueInterceptorId=e.interceptors.request.use((function(e){return(null==e?void 0:e.skipAuthRefresh)?e:r.refreshCall.catch((function(){throw new s.default.Cancel("Request call failed")})).then((function(){return t.onRetry?t.onRetry(e):e}))}))),r.requestQueueInterceptorId},r.unsetCache=function(e,r){e.interceptors.request.eject(r.requestQueueInterceptorId),r.requestQueueInterceptorId=void 0,r.refreshCall=void 0,r.skipInstances=r.skipInstances.filter((function(r){return r!==e}))},r.getRetryInstance=function(e,r){return r.retryInstance||e},r.resendFailedRequest=function(e,r){return e.config.skipAuthRefresh=!0,r(e.response.config)}},300:function(r){r.exports=e}},t={};function n(e){var s=t[e];if(void 0!==s)return s.exports;var o=t[e]={exports:{}};return r[e].call(o.exports,o,o.exports,n),o.exports}var s={};return function(){var e=s;Object.defineProperty(e,"__esModule",{value:!0});var r=n(593);e.default=function(e,t,n){if(void 0===n&&(n={}),"function"!=typeof t)throw new Error("axios-auth-refresh requires `refreshAuthCall` to be a function that returns a promise.");var s={skipInstances:[],refreshCall:void 0,requestQueueInterceptorId:void 0};return e.interceptors.response.use((function(e){return e}),(function(o){if(n=(0,r.mergeOptions)(r.defaultOptions,n),!(0,r.shouldInterceptError)(o,n,e,s))return Promise.reject(o);n.pauseInstanceWhileRefreshing&&s.skipInstances.push(e);var u=(0,r.createRefreshCall)(o,t,s);return(0,r.createRequestQueueInterceptor)(e,s,n),u.finally((function(){return(0,r.unsetCache)(e,s)})).catch((function(e){return Promise.reject(e)})).then((function(){return(0,r.resendFailedRequest)(o,(0,r.getRetryInstance)(e,n))}))}))}}(),s}()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWFkLFNBQVNlLEtBQUksU0FBQ2YsR0FBNEIsT0FBQUEsS0FBVSxTQUFDTixHQUk5RSxHQUZBRixHQUFVLElBQUF3QyxjQUFhLEVBQUE1QyxlQUFnQkksS0FFbEMsSUFBQXlDLHNCQUFxQnZDLEVBQU9GLEVBQVNHLEVBQVVDLEdBQ2hELE9BQU9lLFFBQVFDLE9BQU9sQixHQUd0QkYsRUFBUUYsOEJBQ1JNLEVBQU1TLGNBQWM2QixLQUFLdkMsR0FJN0IsSUFBTXdDLEdBQWEsSUFBQUMsbUJBQWtCMUMsRUFBT29DLEVBQWlCbEMsR0FLN0QsT0FGQSxJQUFBeUMsK0JBQThCMUMsRUFBVUMsRUFBT0osR0FFeEMyQyxFQUNGRyxTQUFRLFdBQU0sV0FBQUMsWUFBVzVDLEVBQVVDLE1BQ25Db0IsT0FBTSxTQUFBdEIsR0FBUyxPQUFBaUIsUUFBUUMsT0FBT2xCLE1BQzlCYyxNQUFLLFdBQU0sV0FBQWdDLHFCQUFvQjlDLEdBQU8sSUFBQStDLGtCQUFpQjlDLEVBQVVILFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9heGlvcy1hdXRoLXJlZnJlc2gvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2F4aW9zLWF1dGgtcmVmcmVzaC8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9heGlvcy1hdXRoLXJlZnJlc2gvZXh0ZXJuYWwgdW1kIFwiYXhpb3NcIiIsIndlYnBhY2s6Ly9heGlvcy1hdXRoLXJlZnJlc2gvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYXhpb3MtYXV0aC1yZWZyZXNoLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImF4aW9zXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImF4aW9zXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImF4aW9zLWF1dGgtcmVmcmVzaFwiXSA9IGZhY3RvcnkocmVxdWlyZShcImF4aW9zXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJheGlvcy1hdXRoLXJlZnJlc2hcIl0gPSBmYWN0b3J5KHJvb3RbXCJheGlvc1wiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zMDBfXykge1xucmV0dXJuICIsImltcG9ydCBheGlvcywgeyBBeGlvc0luc3RhbmNlLCBBeGlvc1Byb21pc2UsIEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IEF4aW9zQXV0aFJlZnJlc2hPcHRpb25zLCBBeGlvc0F1dGhSZWZyZXNoQ2FjaGUgfSBmcm9tICcuL21vZGVsJztcblxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21BeGlvc1JlcXVlc3RDb25maWcgZXh0ZW5kcyBBeGlvc1JlcXVlc3RDb25maWcge1xuICAgIHNraXBBdXRoUmVmcmVzaD86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRPcHRpb25zOiBBeGlvc0F1dGhSZWZyZXNoT3B0aW9ucyA9IHtcbiAgc3RhdHVzQ29kZXM6IFsgNDAxIF0sXG4gIHBhdXNlSW5zdGFuY2VXaGlsZVJlZnJlc2hpbmc6IGZhbHNlLFxufTtcblxuLyoqXG4gKiBNZXJnZXMgdHdvIG9wdGlvbnMgb2JqZWN0cyAob3B0aW9ucyBvdmVyd3JpdGVzIGRlZmF1bHRzKS5cbiAqXG4gKiBAcmV0dXJuIHtBeGlvc0F1dGhSZWZyZXNoT3B0aW9uc31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhcbiAgZGVmYXVsdHM6IEF4aW9zQXV0aFJlZnJlc2hPcHRpb25zLFxuICAgIG9wdGlvbnM6IEF4aW9zQXV0aFJlZnJlc2hPcHRpb25zLFxuKTogQXhpb3NBdXRoUmVmcmVzaE9wdGlvbnMge1xuICByZXR1cm4ge1xuICAgIC4uLmRlZmF1bHRzLFxuICAgIHBhdXNlSW5zdGFuY2VXaGlsZVJlZnJlc2hpbmc6IG9wdGlvbnMuc2tpcFdoaWxlUmVmcmVzaGluZyxcbiAgICAuLi5vcHRpb25zLFxuICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgVFJVRTogd2hlbiBlcnJvci5yZXNwb25zZS5zdGF0dXMgaXMgY29udGFpbmVkIGluIG9wdGlvbnMuc3RhdHVzQ29kZXNcbiAqIFJldHVybnMgRkFMU0U6IHdoZW4gZXJyb3Igb3IgZXJyb3IucmVzcG9uc2UgZG9lc24ndCBleGlzdCBvciBvcHRpb25zLnN0YXR1c0NvZGVzIGRvZXNuJ3QgaW5jbHVkZSByZXNwb25zZSBzdGF0dXNcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkSW50ZXJjZXB0RXJyb3IoXG4gICAgZXJyb3I6IGFueSxcbiAgICBvcHRpb25zOiBBeGlvc0F1dGhSZWZyZXNoT3B0aW9ucyxcbiAgICBpbnN0YW5jZTogQXhpb3NJbnN0YW5jZSxcbiAgICBjYWNoZTogQXhpb3NBdXRoUmVmcmVzaENhY2hlLFxuKTogYm9vbGVhbiB7XG4gIGlmICghZXJyb3IpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZXJyb3IuY29uZmlnPy5za2lwQXV0aFJlZnJlc2gpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoXG4gICAgIShvcHRpb25zLmludGVyY2VwdE5ldHdvcmtFcnJvciAmJiAhZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVxdWVzdC5zdGF0dXMgPT09IDApICYmXG4gICAgKCFlcnJvci5yZXNwb25zZSB8fCAhb3B0aW9ucy5zdGF0dXNDb2Rlcz8uaW5jbHVkZXMocGFyc2VJbnQoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSkpXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIENvcHkgY29uZmlnIHRvIHJlc3BvbnNlIGlmIHRoZXJlJ3MgYSBuZXR3b3JrIGVycm9yLCBzbyBjb25maWcgY2FuIGJlIG1vZGlmaWVkIGFuZCB1c2VkIGluIHRoZSByZXRyeVxuICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7XG4gICAgZXJyb3IucmVzcG9uc2UgPSB7XG4gICAgICBjb25maWc6IGVycm9yLmNvbmZpZyxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuICFvcHRpb25zLnBhdXNlSW5zdGFuY2VXaGlsZVJlZnJlc2hpbmcgfHwgIWNhY2hlLnNraXBJbnN0YW5jZXMuaW5jbHVkZXMoaW5zdGFuY2UpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgcmVmcmVzaCBjYWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0IG9yIHJldHVybnMgdGhlIGV4aXN0aW5nIG9uZS5cbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlPGFueT59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZWZyZXNoQ2FsbChcbiAgICBlcnJvcjogYW55LFxuICAgIGZuOiAoZXJyb3I6IGFueSkgPT4gUHJvbWlzZTxhbnk+LFxuICAgIGNhY2hlOiBBeGlvc0F1dGhSZWZyZXNoQ2FjaGUsXG4pOiBQcm9taXNlPGFueT4ge1xuICBpZiAoIWNhY2hlLnJlZnJlc2hDYWxsKSB7XG4gICAgY2FjaGUucmVmcmVzaENhbGwgPSBmbihlcnJvcik7XG4gICAgaWYgKHR5cGVvZiBjYWNoZS5yZWZyZXNoQ2FsbC50aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2F4aW9zLWF1dGgtcmVmcmVzaCByZXF1aXJlcyBgcmVmcmVzaFRva2VuQ2FsbGAgdG8gcmV0dXJuIGEgcHJvbWlzZS4nKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2FjaGUucmVmcmVzaENhbGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyByZXF1ZXN0IHF1ZXVlIGludGVyY2VwdG9yIGlmIGl0IGRvZXMgbm90IGV4aXN0IGFuZCByZXR1cm5zIGl0cyBpZC5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0UXVldWVJbnRlcmNlcHRvcihcbiAgICBpbnN0YW5jZTogQXhpb3NJbnN0YW5jZSxcbiAgICBjYWNoZTogQXhpb3NBdXRoUmVmcmVzaENhY2hlLFxuICAgIG9wdGlvbnM6IEF4aW9zQXV0aFJlZnJlc2hPcHRpb25zLFxuKTogbnVtYmVyIHtcbiAgaWYgKHR5cGVvZiBjYWNoZS5yZXF1ZXN0UXVldWVJbnRlcmNlcHRvcklkID09PSAndW5kZWZpbmVkJykge1xuICAgIGNhY2hlLnJlcXVlc3RRdWV1ZUludGVyY2VwdG9ySWQgPSBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoKHJlcXVlc3Q6IEN1c3RvbUF4aW9zUmVxdWVzdENvbmZpZykgPT4ge1xuICAgICAgaWYocmVxdWVzdD8uc2tpcEF1dGhSZWZyZXNoKVxuICAgICAgICByZXR1cm4gcmVxdWVzdFxuICAgICAgcmV0dXJuIGNhY2hlLnJlZnJlc2hDYWxsXG4gICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBheGlvcy5DYW5jZWwoJ1JlcXVlc3QgY2FsbCBmYWlsZWQnKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCgpID0+IG9wdGlvbnMub25SZXRyeSA/IG9wdGlvbnMub25SZXRyeShyZXF1ZXN0KSA6IHJlcXVlc3QpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBjYWNoZS5yZXF1ZXN0UXVldWVJbnRlcmNlcHRvcklkO1xufVxuXG4vKipcbiAqIEVqZWN0cyByZXF1ZXN0IHF1ZXVlIGludGVyY2VwdG9yIGFuZCB1bnNldCBpbnRlcmNlcHRvciBjYWNoZWQgdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7QXhpb3NJbnN0YW5jZX0gaW5zdGFuY2VcbiAqIEBwYXJhbSB7QXhpb3NBdXRoUmVmcmVzaENhY2hlfSBjYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5zZXRDYWNoZShcbiAgICBpbnN0YW5jZTogQXhpb3NJbnN0YW5jZSxcbiAgICBjYWNoZTogQXhpb3NBdXRoUmVmcmVzaENhY2hlLFxuKTogdm9pZCB7XG4gIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LmVqZWN0KGNhY2hlLnJlcXVlc3RRdWV1ZUludGVyY2VwdG9ySWQpO1xuICBjYWNoZS5yZXF1ZXN0UXVldWVJbnRlcmNlcHRvcklkID0gdW5kZWZpbmVkO1xuICBjYWNoZS5yZWZyZXNoQ2FsbCA9IHVuZGVmaW5lZDtcbiAgY2FjaGUuc2tpcEluc3RhbmNlcyA9IGNhY2hlLnNraXBJbnN0YW5jZXMuZmlsdGVyKHNraXBJbnN0YW5jZSA9PiBza2lwSW5zdGFuY2UgIT09IGluc3RhbmNlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGluc3RhbmNlIHRoYXQncyBnb2luZyB0byBiZSB1c2VkIHdoZW4gcmVxdWVzdHMgYXJlIHJldHJpZWRcbiAqXG4gKiBAcGFyYW0gaW5zdGFuY2VcbiAqIEBwYXJhbSBvcHRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXRyeUluc3RhbmNlKGluc3RhbmNlOiBBeGlvc0luc3RhbmNlLCBvcHRpb25zOiBBeGlvc0F1dGhSZWZyZXNoT3B0aW9ucyk6IEF4aW9zSW5zdGFuY2Uge1xuICByZXR1cm4gb3B0aW9ucy5yZXRyeUluc3RhbmNlIHx8IGluc3RhbmNlO1xufVxuXG4vKipcbiAqIFJlc2VuZCBmYWlsZWQgYXhpb3MgcmVxdWVzdC5cbiAqXG4gKiBAcGFyYW0ge2FueX0gZXJyb3JcbiAqIEBwYXJhbSB7QXhpb3NJbnN0YW5jZX0gaW5zdGFuY2VcbiAqIEByZXR1cm4gQXhpb3NQcm9taXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNlbmRGYWlsZWRSZXF1ZXN0KFxuICAgIGVycm9yOiBhbnksXG4gICAgaW5zdGFuY2U6IEF4aW9zSW5zdGFuY2Vcbik6IEF4aW9zUHJvbWlzZSB7XG4gIGVycm9yLmNvbmZpZy5za2lwQXV0aFJlZnJlc2ggPSB0cnVlO1xuICByZXR1cm4gaW5zdGFuY2UoZXJyb3IucmVzcG9uc2UuY29uZmlnKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMzAwX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7IEF4aW9zSW5zdGFuY2UsIEF4aW9zUmVzcG9uc2UgfSBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBBeGlvc0F1dGhSZWZyZXNoT3B0aW9ucywgQXhpb3NBdXRoUmVmcmVzaENhY2hlIH0gZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQge1xuICAgIHVuc2V0Q2FjaGUsXG4gICAgbWVyZ2VPcHRpb25zLFxuICAgIGRlZmF1bHRPcHRpb25zLFxuICAgIGdldFJldHJ5SW5zdGFuY2UsXG4gICAgY3JlYXRlUmVmcmVzaENhbGwsXG4gICAgcmVzZW5kRmFpbGVkUmVxdWVzdCxcbiAgICBzaG91bGRJbnRlcmNlcHRFcnJvcixcbiAgICBjcmVhdGVSZXF1ZXN0UXVldWVJbnRlcmNlcHRvcixcbn0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCB7IEF4aW9zQXV0aFJlZnJlc2hPcHRpb25zLCBBeGlvc0F1dGhSZWZyZXNoUmVxdWVzdENvbmZpZyB9IGZyb20gJy4vbW9kZWwnO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXV0aGVudGljYXRpb24gcmVmcmVzaCBpbnRlcmNlcHRvciB0aGF0IGJpbmRzIHRvIGFueSBlcnJvciByZXNwb25zZS5cbiAqIElmIHRoZSByZXNwb25zZSBzdGF0dXMgY29kZSBpcyBvbmUgb2YgdGhlIG9wdGlvbnMuc3RhdHVzQ29kZXMsIGludGVyY2VwdG9yIGNhbGxzIHRoZSByZWZyZXNoQXV0aENhbGxcbiAqIHdoaWNoIG11c3QgcmV0dXJuIGEgUHJvbWlzZS4gV2hpbGUgcmVmcmVzaEF1dGhDYWxsIGlzIHJ1bm5pbmcsIGFsbCB0aGUgbmV3IHJlcXVlc3RzIGFyZSBpbnRlcmNlcHRlZCBhbmQgYXJlIHdhaXRpbmdcbiAqIGZvciB0aGUgcmVmcmVzaCBjYWxsIHRvIHJlc29sdmUuIFdoaWxlIHJ1bm5pbmcgdGhlIHJlZnJlc2hpbmcgY2FsbCwgaW5zdGFuY2UgcHJvdmlkZWQgaXMgbWFya2VkIGFzIGEgcGF1c2VkIGluc3RhbmNlXG4gKiB3aGljaCBpbmRpY2F0ZXMgdGhlIGludGVyY2VwdG9yIHRvIG5vdCBpbnRlcmNlcHQgYW55IHJlc3BvbnNlcyBmcm9tIGl0LiBUaGlzIGlzIGJlY2F1c2UgeW91J2Qgb3RoZXJ3aXNlIG5lZWQgdG8gbWFya1xuICogdGhlIHNwZWNpZmljIHJlcXVlc3RzIHlvdSBtYWtlIGJ5IHlvdXJzZWxmIGluIG9yZGVyIHRvIG1ha2Ugc3VyZSBpdCdzIG5vdCBpbnRlcmNlcHRlZC4gVGhpcyBiZWhhdmlvciBjYW4gYmVcbiAqIHR1cm5lZCBvZmYsIGJ1dCB1c2UgaXQgd2l0aCBjYXV0aW9uIGFzIHlvdSBuZWVkIHRvIG1hcmsgdGhlIHJlcXVlc3RzIHdpdGggYHNraXBBdXRoUmVmcmVzaGAgZmxhZyB5b3Vyc2VsZiBpbiBvcmRlciB0b1xuICogbm90IHJ1biBpbnRvIGludGVyY2VwdG9ycyBsb29wLlxuICpcbiAqIEBwYXJhbSB7QXhpb3NJbnN0YW5jZX0gaW5zdGFuY2UgLSBBeGlvcyBIVFRQIGNsaWVudCBpbnN0YW5jZVxuICogQHBhcmFtIHsoZXJyb3I6IGFueSkgPT4gUHJvbWlzZTxBeGlvc1Byb21pc2U+fSByZWZyZXNoQXV0aENhbGwgLSByZWZyZXNoIHRva2VuIGNhbGwgd2hpY2ggbXVzdCByZXR1cm4gYSBQcm9taXNlXG4gKiBAcGFyYW0ge0F4aW9zQXV0aFJlZnJlc2hPcHRpb25zfSBvcHRpb25zIC0gb3B0aW9ucyBmb3IgdGhlIGludGVyY2VwdG9yIEBzZWUgZGVmYXVsdE9wdGlvbnNcbiAqIEByZXR1cm4ge251bWJlcn0gLSBpbnRlcmNlcHRvciBpZCAoaW4gY2FzZSB5b3Ugd2FudCB0byBlamVjdCBpdCBtYW51YWxseSlcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQXV0aFJlZnJlc2hJbnRlcmNlcHRvcihcbiAgICBpbnN0YW5jZTogQXhpb3NJbnN0YW5jZSxcbiAgICByZWZyZXNoQXV0aENhbGw6IChlcnJvcjogYW55KSA9PiBQcm9taXNlPGFueT4sXG4gICAgb3B0aW9uczogQXhpb3NBdXRoUmVmcmVzaE9wdGlvbnMgPSB7fSxcbik6IG51bWJlciB7XG5cbiAgICBpZiAodHlwZW9mIHJlZnJlc2hBdXRoQ2FsbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2F4aW9zLWF1dGgtcmVmcmVzaCByZXF1aXJlcyBgcmVmcmVzaEF1dGhDYWxsYCB0byBiZSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2UuJyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2FjaGU6IEF4aW9zQXV0aFJlZnJlc2hDYWNoZSA9IHtcbiAgICAgICAgc2tpcEluc3RhbmNlczogW10sXG4gICAgICAgIHJlZnJlc2hDYWxsOiB1bmRlZmluZWQsXG4gICAgICAgIHJlcXVlc3RRdWV1ZUludGVyY2VwdG9ySWQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoKHJlc3BvbnNlOiBBeGlvc1Jlc3BvbnNlKSA9PiByZXNwb25zZSwgKGVycm9yOiBhbnkpID0+IHtcblxuICAgICAgICBvcHRpb25zID0gbWVyZ2VPcHRpb25zKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoIXNob3VsZEludGVyY2VwdEVycm9yKGVycm9yLCBvcHRpb25zLCBpbnN0YW5jZSwgY2FjaGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMucGF1c2VJbnN0YW5jZVdoaWxlUmVmcmVzaGluZykge1xuICAgICAgICAgICAgY2FjaGUuc2tpcEluc3RhbmNlcy5wdXNoKGluc3RhbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHJlZnJlc2ggY2FsbCBkb2VzIG5vdCBleGlzdCwgY3JlYXRlIG9uZVxuICAgICAgICBjb25zdCByZWZyZXNoaW5nID0gY3JlYXRlUmVmcmVzaENhbGwoZXJyb3IsIHJlZnJlc2hBdXRoQ2FsbCwgY2FjaGUpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBpbnRlcmNlcHRvciB0aGF0IHdpbGwgYmluZCBhbGwgdGhlIG90aGVycyByZXF1ZXN0cyB1bnRpbCByZWZyZXNoQXV0aENhbGwgaXMgcmVzb2x2ZWRcbiAgICAgICAgY3JlYXRlUmVxdWVzdFF1ZXVlSW50ZXJjZXB0b3IoaW5zdGFuY2UsIGNhY2hlLCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gcmVmcmVzaGluZ1xuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gdW5zZXRDYWNoZShpbnN0YW5jZSwgY2FjaGUpKVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IFByb21pc2UucmVqZWN0KGVycm9yKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHJlc2VuZEZhaWxlZFJlcXVlc3QoZXJyb3IsIGdldFJldHJ5SW5zdGFuY2UoaW5zdGFuY2UsIG9wdGlvbnMpKSk7XG4gICAgfSk7XG59XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zMDBfXyIsImRlZmF1bHRPcHRpb25zIiwic3RhdHVzQ29kZXMiLCJwYXVzZUluc3RhbmNlV2hpbGVSZWZyZXNoaW5nIiwiZGVmYXVsdHMiLCJvcHRpb25zIiwic2tpcFdoaWxlUmVmcmVzaGluZyIsImVycm9yIiwiaW5zdGFuY2UiLCJjYWNoZSIsImNvbmZpZyIsInNraXBBdXRoUmVmcmVzaCIsImludGVyY2VwdE5ldHdvcmtFcnJvciIsInJlc3BvbnNlIiwicmVxdWVzdCIsInN0YXR1cyIsImluY2x1ZGVzIiwicGFyc2VJbnQiLCJza2lwSW5zdGFuY2VzIiwiZm4iLCJyZWZyZXNoQ2FsbCIsInRoZW4iLCJjb25zb2xlIiwid2FybiIsIlByb21pc2UiLCJyZWplY3QiLCJyZXF1ZXN0UXVldWVJbnRlcmNlcHRvcklkIiwiaW50ZXJjZXB0b3JzIiwidXNlIiwiY2F0Y2giLCJDYW5jZWwiLCJvblJldHJ5IiwiZWplY3QiLCJ1bmRlZmluZWQiLCJmaWx0ZXIiLCJza2lwSW5zdGFuY2UiLCJyZXRyeUluc3RhbmNlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJyZWZyZXNoQXV0aENhbGwiLCJFcnJvciIsIm1lcmdlT3B0aW9ucyIsInNob3VsZEludGVyY2VwdEVycm9yIiwicHVzaCIsInJlZnJlc2hpbmciLCJjcmVhdGVSZWZyZXNoQ2FsbCIsImNyZWF0ZVJlcXVlc3RRdWV1ZUludGVyY2VwdG9yIiwiZmluYWxseSIsInVuc2V0Q2FjaGUiLCJyZXNlbmRGYWlsZWRSZXF1ZXN0IiwiZ2V0UmV0cnlJbnN0YW5jZSJdLCJzb3VyY2VSb290IjoiIn0=